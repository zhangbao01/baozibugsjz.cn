四: 第二部分的内容jvm相关的知识,之前试看周志明jvm相关书籍都是死记硬背理论缺乏实战效果不理想,之后是看救火队长的jvm专栏写的通俗易懂同时很多案例分析,建议先看专栏在看书,专栏中都有答案这里把jvm面试中问题说一下
 
问题: jvm的内存分配和执行原理以及类加载过程
问题:常用垃圾收集器有哪些,你们线上用的什么收集器,CMS优化,G1工作原理
问题:线上机器cpu负载过高如何去排查,如何去优化JVM参数



问题:是否有遇到过线上OOM情况,如何去排查的(这个拿老师案例说一下)
1.触发OOM的地方metaspace,线程虚拟机栈,堆内存,堆外内存专栏对应的场景都有案例我面试说了一个堆外内存溢出的情况

2.业务背景:公司IM系统使用netty来进行消息推送,有人在pipeline中自己创建byteBuf未释放

   3.分析问题:
       1.先通过OOM后自动生成的堆快照信息通过mat分析可能出现的地方和线程的调用栈定位到代码行

       2.当并发量较大时堆内存持有堆外内存引用的对象进入老年代一直不能被回收,当通过jdk ByteBuffer.allocateDirect(xx)时java.nio.Bits#reserveMemory尝试的去分配堆外内存,如果堆外内存空间不够时会执行一次System.gc()通知jvm来进行一次full gc

       3.但是由于线上jvm参数-XX:DisableExplicitGC禁止system.gc()导致堆外内存溢出
	   
	   


五: 第三部分的内容mysql相关的知识,我之前看过mysql45讲,曾经以为自己mysql不用在学一遍了,后来儒猿群朋友推荐看队长的mysql专栏才知道细节上的东西

客观评价一下mysql 45讲讲的比较好的两个点就是死锁和join了其他我觉得一般,太多时间要看评论才能弄明白问题,mysql知识点队长专栏都有详细讲解,这里我就把面试问到问题列一下


问题:mysql通过什么机制来保证事物数据不丢失,MVCC机制和read-view视图

问题:mysql的索引结构,为什么不使用B树使用B+树,三层索引大概能支持多少数据,sql如何优化,覆盖索引,回表查询,索引下推等概念

问题:mysql的锁有哪些,如何分析死锁问题,死锁如何解决

问题:现在有一个场景需要保证数据库和redis的双写一致性,你会如何去做

问题:mysql的水平分库分表,什么情况下水平分表,什么情况下分库,分库分表的中间件你如何进行技术的选型,分片键有多个如何去做,单表迁移到分库分表方案,分库分表如何扩容